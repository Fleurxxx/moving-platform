{
    "sourceFile": "src/component/Input.vue",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 8,
            "patches": [
                {
                    "date": 1711869295351,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1711869358417,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -102,9 +102,9 @@\n     }\r\n }\r\n </script>\r\n \r\n-<style scoped lang=\"scss\">\r\n+<style scoped lang=\"less\">\r\n .emoji-container {\r\n     width: 400px;\r\n     height: 160px;\r\n     margin: 10px auto;\r\n"
                },
                {
                    "date": 1711869510912,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -104,9 +104,9 @@\n </script>\r\n \r\n <style scoped lang=\"less\">\r\n .emoji-container {\r\n-    width: 400px;\r\n+    width: 100%;\r\n     height: 160px;\r\n     margin: 10px auto;\r\n     border-radius: 5px;\r\n     padding: 10px;\r\n"
                },
                {
                    "date": 1711869533739,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,219 @@\n+<template>\r\n+    <div class=\"emoji-container clearfix\">\r\n+\r\n+        <div class=\"input-area\" ref=\"editableInputAreaDiv\" contenteditable=\"true\">\r\n+            halo world\r\n+            <img src=\"https://cdn.sunofbeaches.com/emoji/1.png\" alt=\"\">\r\n+        </div>\r\n+        \r\n+        <div class=\"input-area-bar\">\r\n+            <span class=\"emoji-txt\" @click=\"emojiShow = !emojiShow\">表情</span>\r\n+            <span class=\"emoji-btn\" @click=\"publish\">发布</span>\r\n+        </div>\r\n+        \r\n+        <div class=\"emoji-item-container\" v-show=\"true\">\r\n+            <div class=\"emoji-item-area\">\r\n+                <img v-for=\"(emoji, key) in 130\" :key=\"key\" @click=\"addEmoji(emoji)\"\r\n+                    :src=\"'https://cdn.sunofbeaches.com/emoji/' + emoji + '.png'\" alt=\"\" />\r\n+            </div>\r\n+        </div>\r\n+    </div>\r\n+</template>\r\n+\r\n+<script>\r\n+export default {\r\n+    name: \"Emoji\",\r\n+    data() {\r\n+        return {\r\n+            emojiShow: false,\r\n+            lastEditRange: null,\r\n+        }\r\n+    },\r\n+    mounted() {\r\n+        this.$refs['editableInputAreaDiv'].onclick = () => {\r\n+            // 获取选定对象\r\n+            let selection = window.getSelection()\r\n+            console.log(selection, selection.rangeCount, 'selection');\r\n+            // 设置最后光标对象\r\n+            if (selection.rangeCount > 0) {\r\n+                // 记录光标最后点击可编辑div中所选择的位置\r\n+                this.lastEditRange = selection.getRangeAt(0);\r\n+                console.log(selection.getRangeAt(0));\r\n+            }\r\n+        }\r\n+    },\r\n+    methods: {\r\n+        publish() {\r\n+            this.$refs['editableInputAreaDiv'].focus()\r\n+            let selection = window.getSelection()\r\n+\r\n+        },\r\n+        addEmoji(emoji) {\r\n+            let edit = this.$refs['editableInputAreaDiv']\r\n+\r\n+            edit.focus()\r\n+            let selection = window.getSelection()\r\n+            // 如果存在最后的光标对象\r\n+            if (this.lastEditRange) {\r\n+                console.log('last');\r\n+                // 选区对象清除所有光标\r\n+                selection.removeAllRanges();\r\n+                // 并添加最后记录的光标，以还原之前的状态\r\n+                selection.addRange(this.lastEditRange);\r\n+\r\n+                // 创建表情图\r\n+                let img = document.createElement('img');\r\n+                img.src = 'https://cdn.sunofbeaches.com/emoji/' + emoji + '.png';\r\n+                console.log(img);\r\n+                /*\r\n+                // 也可以这样创建img \r\n+                let image = new Image();\r\n+                image.src = 'https://cdn.sunofbeaches.com/emoji/' + emoji + '.png'; */\r\n+\r\n+                // 获取到最后选择的位置\r\n+                var range = selection.getRangeAt(0);\r\n+\r\n+                // 在此位置插入表情图\r\n+                range.insertNode(img)\r\n+                // range.insertNode(image) // 或者这样插入\r\n+\r\n+                // false，表示将Range对象所代表的区域的起点移动到终点处\r\n+                range.collapse(false)\r\n+\r\n+                // 记录最后的位置\r\n+                this.lastEditRange = selection.getRangeAt(0);\r\n+            } else {\r\n+                console.log('new')\r\n+                // 创建一个img标签（表情）\r\n+                let img = document.createElement('img');\r\n+                img.src = 'https://cdn.sunofbeaches.com/emoji/' + emoji + '.png';\r\n+                console.log(img);\r\n+                // 将表情添加到可编辑的div中，作为可编辑div的子节点\r\n+                edit.appendChild(img)\r\n+                // 使用选取对象，选取可编辑div中的所有子节点\r\n+                selection.selectAllChildren(edit)\r\n+                // 合并到最后面，即实现了添加一个表情后，把光标移到最后面\r\n+                selection.collapseToEnd()\r\n+                return\r\n+            }\r\n+\r\n+\r\n+        }\r\n+    }\r\n+}\r\n+</script>\r\n+\r\n+<style scoped lang=\"less\">\r\n+.emoji-container {\r\n+    width: 100%;\r\n+    height: 160px;\r\n+    margin: 10px auto;\r\n+    border-radius: 5px;\r\n+    padding: 10px;\r\n+\r\n+    background-color: #fff;\r\n+\r\n+    ::v-deep .input-area {\r\n+        height: 100px;\r\n+        border: 1px solid #e9e9e9;\r\n+        outline: none;\r\n+        padding: 10px;\r\n+        font-size: 16px;\r\n+        overflow-y: scroll;\r\n+\r\n+        &:focus {\r\n+            border: 1px solid red;\r\n+        }\r\n+\r\n+        img {\r\n+            width: 20px;\r\n+            height: 20px;\r\n+            vertical-align: bottom;\r\n+            margin: 0 2px;\r\n+\r\n+        }\r\n+    }\r\n+\r\n+    .input-area-bar {\r\n+        display: flex;\r\n+        justify-content: space-between;\r\n+        align-items: center;\r\n+        margin: 10px 5px;\r\n+        line-height: 20px;\r\n+        height: 30px;\r\n+\r\n+        .emoji-txt {\r\n+            color: #4485f9;\r\n+            cursor: pointer;\r\n+        }\r\n+\r\n+\r\n+        .emoji-btn {\r\n+            background-color: #4485f9;\r\n+            cursor: pointer;\r\n+            padding: 0px 10px;\r\n+            color: #fff;\r\n+            height: 100%;\r\n+            line-height: 28px;\r\n+            border-radius: 5px;\r\n+        }\r\n+    }\r\n+}\r\n+\r\n+.emoji-item-container {\r\n+    background-color: #fff;\r\n+    height: 200px;\r\n+    border-radius: 5px;\r\n+    padding: 5px;\r\n+    overflow-y: auto;\r\n+    margin-top: 14px;\r\n+    box-shadow: 0 0 5px 5px rgba(0, 0, 0, .028);\r\n+\r\n+    .emoji-item-area {\r\n+\r\n+        img {\r\n+            cursor: pointer;\r\n+            width: 20px;\r\n+            height: 20px;\r\n+            margin: 2px;\r\n+            padding: 9px;\r\n+            border-radius: 8px;\r\n+            vertical-align: bottom;\r\n+            transition: all .28s;\r\n+\r\n+            &:hover {\r\n+                transform: scale(1.2);\r\n+            }\r\n+\r\n+            &:hover {\r\n+                background-color: #eaeaea;\r\n+            }\r\n+        }\r\n+    }\r\n+\r\n+}\r\n+\r\n+.clearfix::before,\r\n+.clearfix::after {\r\n+    content: \"\";\r\n+    display: table;\r\n+    clear: both;\r\n+}\r\n+\r\n+::-webkit-scrollbar {\r\n+    width: 4px;\r\n+}\r\n+\r\n+::-webkit-scrollbar-thumb {\r\n+    border-radius: 10px;\r\n+    box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.12);\r\n+    background: rgba(0, 0, 0, 0.2);\r\n+}\r\n+\r\n+/*::-webkit-scrollbar-track {\r\n+        box-shadow: inset 0 0 5px rgba(0,0,0,0.2);\r\n+        border-radius: 10px;\r\n+        background: rgba(0,0,0,0.1);\r\n+    }*/\r\n+</style>\r\n+\r\n"
                },
                {
                    "date": 1711869539539,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,219 @@\n+<template>\r\n+    <div class=\"emoji-container clearfix\">\r\n+\r\n+        <div class=\"input-area\" ref=\"editableInputAreaDiv\" contenteditable=\"true\">\r\n+            halo world\r\n+            <img src=\"https://cdn.sunofbeaches.com/emoji/1.png\" alt=\"\">\r\n+        </div>\r\n+        \r\n+        <div class=\"input-area-bar\">\r\n+            <span class=\"emoji-txt\" @click=\"emojiShow = !emojiShow\">表情</span>\r\n+            <span class=\"emoji-btn\" @click=\"publish\">发布</span>\r\n+        </div>\r\n+        \r\n+        <div class=\"emoji-item-container\" v-show=\"true\">\r\n+            <div class=\"emoji-item-area\">\r\n+                <img v-for=\"(emoji, key) in 130\" :key=\"key\" @click=\"addEmoji(emoji)\"\r\n+                    :src=\"'https://cdn.sunofbeaches.com/emoji/' + emoji + '.png'\" alt=\"\" />\r\n+            </div>\r\n+        </div>\r\n+    </div>\r\n+</template>\r\n+\r\n+<script>\r\n+export default {\r\n+    name: \"Emoji\",\r\n+    data() {\r\n+        return {\r\n+            emojiShow: false,\r\n+            lastEditRange: null,\r\n+        }\r\n+    },\r\n+    mounted() {\r\n+        this.$refs['editableInputAreaDiv'].onclick = () => {\r\n+            // 获取选定对象\r\n+            let selection = window.getSelection()\r\n+            console.log(selection, selection.rangeCount, 'selection');\r\n+            // 设置最后光标对象\r\n+            if (selection.rangeCount > 0) {\r\n+                // 记录光标最后点击可编辑div中所选择的位置\r\n+                this.lastEditRange = selection.getRangeAt(0);\r\n+                console.log(selection.getRangeAt(0));\r\n+            }\r\n+        }\r\n+    },\r\n+    methods: {\r\n+        publish() {\r\n+            this.$refs['editableInputAreaDiv'].focus()\r\n+            let selection = window.getSelection()\r\n+\r\n+        },\r\n+        addEmoji(emoji) {\r\n+            let edit = this.$refs['editableInputAreaDiv']\r\n+\r\n+            edit.focus()\r\n+            let selection = window.getSelection()\r\n+            // 如果存在最后的光标对象\r\n+            if (this.lastEditRange) {\r\n+                console.log('last');\r\n+                // 选区对象清除所有光标\r\n+                selection.removeAllRanges();\r\n+                // 并添加最后记录的光标，以还原之前的状态\r\n+                selection.addRange(this.lastEditRange);\r\n+\r\n+                // 创建表情图\r\n+                let img = document.createElement('img');\r\n+                img.src = 'https://cdn.sunofbeaches.com/emoji/' + emoji + '.png';\r\n+                console.log(img);\r\n+                /*\r\n+                // 也可以这样创建img \r\n+                let image = new Image();\r\n+                image.src = 'https://cdn.sunofbeaches.com/emoji/' + emoji + '.png'; */\r\n+\r\n+                // 获取到最后选择的位置\r\n+                var range = selection.getRangeAt(0);\r\n+\r\n+                // 在此位置插入表情图\r\n+                range.insertNode(img)\r\n+                // range.insertNode(image) // 或者这样插入\r\n+\r\n+                // false，表示将Range对象所代表的区域的起点移动到终点处\r\n+                range.collapse(false)\r\n+\r\n+                // 记录最后的位置\r\n+                this.lastEditRange = selection.getRangeAt(0);\r\n+            } else {\r\n+                console.log('new')\r\n+                // 创建一个img标签（表情）\r\n+                let img = document.createElement('img');\r\n+                img.src = 'https://cdn.sunofbeaches.com/emoji/' + emoji + '.png';\r\n+                console.log(img);\r\n+                // 将表情添加到可编辑的div中，作为可编辑div的子节点\r\n+                edit.appendChild(img)\r\n+                // 使用选取对象，选取可编辑div中的所有子节点\r\n+                selection.selectAllChildren(edit)\r\n+                // 合并到最后面，即实现了添加一个表情后，把光标移到最后面\r\n+                selection.collapseToEnd()\r\n+                return\r\n+            }\r\n+\r\n+\r\n+        }\r\n+    }\r\n+}\r\n+</script>\r\n+\r\n+<style scoped lang=\"less\">\r\n+.emoji-container {\r\n+    width: 100%;\r\n+    height: 100%;\r\n+    margin: 10px auto;\r\n+    border-radius: 5px;\r\n+    padding: 10px;\r\n+\r\n+    background-color: #fff;\r\n+\r\n+    ::v-deep .input-area {\r\n+        height: 100px;\r\n+        border: 1px solid #e9e9e9;\r\n+        outline: none;\r\n+        padding: 10px;\r\n+        font-size: 16px;\r\n+        overflow-y: scroll;\r\n+\r\n+        &:focus {\r\n+            border: 1px solid red;\r\n+        }\r\n+\r\n+        img {\r\n+            width: 20px;\r\n+            height: 20px;\r\n+            vertical-align: bottom;\r\n+            margin: 0 2px;\r\n+\r\n+        }\r\n+    }\r\n+\r\n+    .input-area-bar {\r\n+        display: flex;\r\n+        justify-content: space-between;\r\n+        align-items: center;\r\n+        margin: 10px 5px;\r\n+        line-height: 20px;\r\n+        height: 30px;\r\n+\r\n+        .emoji-txt {\r\n+            color: #4485f9;\r\n+            cursor: pointer;\r\n+        }\r\n+\r\n+\r\n+        .emoji-btn {\r\n+            background-color: #4485f9;\r\n+            cursor: pointer;\r\n+            padding: 0px 10px;\r\n+            color: #fff;\r\n+            height: 100%;\r\n+            line-height: 28px;\r\n+            border-radius: 5px;\r\n+        }\r\n+    }\r\n+}\r\n+\r\n+.emoji-item-container {\r\n+    background-color: #fff;\r\n+    height: 200px;\r\n+    border-radius: 5px;\r\n+    padding: 5px;\r\n+    overflow-y: auto;\r\n+    margin-top: 14px;\r\n+    box-shadow: 0 0 5px 5px rgba(0, 0, 0, .028);\r\n+\r\n+    .emoji-item-area {\r\n+\r\n+        img {\r\n+            cursor: pointer;\r\n+            width: 20px;\r\n+            height: 20px;\r\n+            margin: 2px;\r\n+            padding: 9px;\r\n+            border-radius: 8px;\r\n+            vertical-align: bottom;\r\n+            transition: all .28s;\r\n+\r\n+            &:hover {\r\n+                transform: scale(1.2);\r\n+            }\r\n+\r\n+            &:hover {\r\n+                background-color: #eaeaea;\r\n+            }\r\n+        }\r\n+    }\r\n+\r\n+}\r\n+\r\n+.clearfix::before,\r\n+.clearfix::after {\r\n+    content: \"\";\r\n+    display: table;\r\n+    clear: both;\r\n+}\r\n+\r\n+::-webkit-scrollbar {\r\n+    width: 4px;\r\n+}\r\n+\r\n+::-webkit-scrollbar-thumb {\r\n+    border-radius: 10px;\r\n+    box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.12);\r\n+    background: rgba(0, 0, 0, 0.2);\r\n+}\r\n+\r\n+/*::-webkit-scrollbar-track {\r\n+        box-shadow: inset 0 0 5px rgba(0,0,0,0.2);\r\n+        border-radius: 10px;\r\n+        background: rgba(0,0,0,0.1);\r\n+    }*/\r\n+</style>\r\n+\r\n"
                },
                {
                    "date": 1711869547898,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,218 @@\n+<template>\r\n+    <div class=\"emoji-container clearfix\">\r\n+\r\n+        <div class=\"input-area\" ref=\"editableInputAreaDiv\" contenteditable=\"true\">\r\n+            halo world\r\n+            <img src=\"https://cdn.sunofbeaches.com/emoji/1.png\" alt=\"\">\r\n+        </div>\r\n+        \r\n+        <div class=\"input-area-bar\">\r\n+            <span class=\"emoji-txt\" @click=\"emojiShow = !emojiShow\">表情</span>\r\n+            <span class=\"emoji-btn\" @click=\"publish\">发布</span>\r\n+        </div>\r\n+        \r\n+        <div class=\"emoji-item-container\" v-show=\"true\">\r\n+            <div class=\"emoji-item-area\">\r\n+                <img v-for=\"(emoji, key) in 130\" :key=\"key\" @click=\"addEmoji(emoji)\"\r\n+                    :src=\"'https://cdn.sunofbeaches.com/emoji/' + emoji + '.png'\" alt=\"\" />\r\n+            </div>\r\n+        </div>\r\n+    </div>\r\n+</template>\r\n+\r\n+<script>\r\n+export default {\r\n+    name: \"Emoji\",\r\n+    data() {\r\n+        return {\r\n+            emojiShow: false,\r\n+            lastEditRange: null,\r\n+        }\r\n+    },\r\n+    mounted() {\r\n+        this.$refs['editableInputAreaDiv'].onclick = () => {\r\n+            // 获取选定对象\r\n+            let selection = window.getSelection()\r\n+            console.log(selection, selection.rangeCount, 'selection');\r\n+            // 设置最后光标对象\r\n+            if (selection.rangeCount > 0) {\r\n+                // 记录光标最后点击可编辑div中所选择的位置\r\n+                this.lastEditRange = selection.getRangeAt(0);\r\n+                console.log(selection.getRangeAt(0));\r\n+            }\r\n+        }\r\n+    },\r\n+    methods: {\r\n+        publish() {\r\n+            this.$refs['editableInputAreaDiv'].focus()\r\n+            let selection = window.getSelection()\r\n+\r\n+        },\r\n+        addEmoji(emoji) {\r\n+            let edit = this.$refs['editableInputAreaDiv']\r\n+\r\n+            edit.focus()\r\n+            let selection = window.getSelection()\r\n+            // 如果存在最后的光标对象\r\n+            if (this.lastEditRange) {\r\n+                console.log('last');\r\n+                // 选区对象清除所有光标\r\n+                selection.removeAllRanges();\r\n+                // 并添加最后记录的光标，以还原之前的状态\r\n+                selection.addRange(this.lastEditRange);\r\n+\r\n+                // 创建表情图\r\n+                let img = document.createElement('img');\r\n+                img.src = 'https://cdn.sunofbeaches.com/emoji/' + emoji + '.png';\r\n+                console.log(img);\r\n+                /*\r\n+                // 也可以这样创建img \r\n+                let image = new Image();\r\n+                image.src = 'https://cdn.sunofbeaches.com/emoji/' + emoji + '.png'; */\r\n+\r\n+                // 获取到最后选择的位置\r\n+                var range = selection.getRangeAt(0);\r\n+\r\n+                // 在此位置插入表情图\r\n+                range.insertNode(img)\r\n+                // range.insertNode(image) // 或者这样插入\r\n+\r\n+                // false，表示将Range对象所代表的区域的起点移动到终点处\r\n+                range.collapse(false)\r\n+\r\n+                // 记录最后的位置\r\n+                this.lastEditRange = selection.getRangeAt(0);\r\n+            } else {\r\n+                console.log('new')\r\n+                // 创建一个img标签（表情）\r\n+                let img = document.createElement('img');\r\n+                img.src = 'https://cdn.sunofbeaches.com/emoji/' + emoji + '.png';\r\n+                console.log(img);\r\n+                // 将表情添加到可编辑的div中，作为可编辑div的子节点\r\n+                edit.appendChild(img)\r\n+                // 使用选取对象，选取可编辑div中的所有子节点\r\n+                selection.selectAllChildren(edit)\r\n+                // 合并到最后面，即实现了添加一个表情后，把光标移到最后面\r\n+                selection.collapseToEnd()\r\n+                return\r\n+            }\r\n+\r\n+\r\n+        }\r\n+    }\r\n+}\r\n+</script>\r\n+\r\n+<style scoped lang=\"less\">\r\n+.emoji-container {\r\n+    width: 100%;\r\n+    height: 100%;\r\n+    margin: 10px auto;\r\n+    border-radius: 5px;\r\n+    padding: 10px;\r\n+    background-color: #fff;\r\n+\r\n+    ::v-deep .input-area {\r\n+        height: 100px;\r\n+        border: 1px solid #e9e9e9;\r\n+        outline: none;\r\n+        padding: 10px;\r\n+        font-size: 16px;\r\n+        overflow-y: scroll;\r\n+\r\n+        &:focus {\r\n+            border: 1px solid red;\r\n+        }\r\n+\r\n+        img {\r\n+            width: 20px;\r\n+            height: 20px;\r\n+            vertical-align: bottom;\r\n+            margin: 0 2px;\r\n+\r\n+        }\r\n+    }\r\n+\r\n+    .input-area-bar {\r\n+        display: flex;\r\n+        justify-content: space-between;\r\n+        align-items: center;\r\n+        margin: 10px 5px;\r\n+        line-height: 20px;\r\n+        height: 30px;\r\n+\r\n+        .emoji-txt {\r\n+            color: #4485f9;\r\n+            cursor: pointer;\r\n+        }\r\n+\r\n+\r\n+        .emoji-btn {\r\n+            background-color: #4485f9;\r\n+            cursor: pointer;\r\n+            padding: 0px 10px;\r\n+            color: #fff;\r\n+            height: 100%;\r\n+            line-height: 28px;\r\n+            border-radius: 5px;\r\n+        }\r\n+    }\r\n+}\r\n+\r\n+.emoji-item-container {\r\n+    background-color: #fff;\r\n+    height: 200px;\r\n+    border-radius: 5px;\r\n+    padding: 5px;\r\n+    overflow-y: auto;\r\n+    margin-top: 14px;\r\n+    box-shadow: 0 0 5px 5px rgba(0, 0, 0, .028);\r\n+\r\n+    .emoji-item-area {\r\n+\r\n+        img {\r\n+            cursor: pointer;\r\n+            width: 20px;\r\n+            height: 20px;\r\n+            margin: 2px;\r\n+            padding: 9px;\r\n+            border-radius: 8px;\r\n+            vertical-align: bottom;\r\n+            transition: all .28s;\r\n+\r\n+            &:hover {\r\n+                transform: scale(1.2);\r\n+            }\r\n+\r\n+            &:hover {\r\n+                background-color: #eaeaea;\r\n+            }\r\n+        }\r\n+    }\r\n+\r\n+}\r\n+\r\n+.clearfix::before,\r\n+.clearfix::after {\r\n+    content: \"\";\r\n+    display: table;\r\n+    clear: both;\r\n+}\r\n+\r\n+::-webkit-scrollbar {\r\n+    width: 4px;\r\n+}\r\n+\r\n+::-webkit-scrollbar-thumb {\r\n+    border-radius: 10px;\r\n+    box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.12);\r\n+    background: rgba(0, 0, 0, 0.2);\r\n+}\r\n+\r\n+/*::-webkit-scrollbar-track {\r\n+        box-shadow: inset 0 0 5px rgba(0,0,0,0.2);\r\n+        border-radius: 10px;\r\n+        background: rgba(0,0,0,0.1);\r\n+    }*/\r\n+</style>\r\n+\r\n"
                },
                {
                    "date": 1711869851240,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -198,13 +198,13 @@\n     display: table;\r\n     clear: both;\r\n }\r\n \r\n-::-webkit-scrollbar {\r\n+&::-webkit-scrollbar {\r\n     width: 4px;\r\n }\r\n \r\n-::-webkit-scrollbar-thumb {\r\n+&::-webkit-scrollbar-thumb {\r\n     border-radius: 10px;\r\n     box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.12);\r\n     background: rgba(0, 0, 0, 0.2);\r\n }\r\n@@ -215,661 +215,4 @@\n         background: rgba(0,0,0,0.1);\r\n     }*/\r\n </style>\r\n \r\n-<template>\r\n-    <div class=\"emoji-container clearfix\">\r\n-\r\n-        <div class=\"input-area\" ref=\"editableInputAreaDiv\" contenteditable=\"true\">\r\n-            halo world\r\n-            <img src=\"https://cdn.sunofbeaches.com/emoji/1.png\" alt=\"\">\r\n-        </div>\r\n-        \r\n-        <div class=\"input-area-bar\">\r\n-            <span class=\"emoji-txt\" @click=\"emojiShow = !emojiShow\">表情</span>\r\n-            <span class=\"emoji-btn\" @click=\"publish\">发布</span>\r\n-        </div>\r\n-        \r\n-        <div class=\"emoji-item-container\" v-show=\"true\">\r\n-            <div class=\"emoji-item-area\">\r\n-                <img v-for=\"(emoji, key) in 130\" :key=\"key\" @click=\"addEmoji(emoji)\"\r\n-                    :src=\"'https://cdn.sunofbeaches.com/emoji/' + emoji + '.png'\" alt=\"\" />\r\n-            </div>\r\n-        </div>\r\n-    </div>\r\n-</template>\r\n-\r\n-<script>\r\n-export default {\r\n-    name: \"Emoji\",\r\n-    data() {\r\n-        return {\r\n-            emojiShow: false,\r\n-            lastEditRange: null,\r\n-        }\r\n-    },\r\n-    mounted() {\r\n-        this.$refs['editableInputAreaDiv'].onclick = () => {\r\n-            // 获取选定对象\r\n-            let selection = window.getSelection()\r\n-            console.log(selection, selection.rangeCount, 'selection');\r\n-            // 设置最后光标对象\r\n-            if (selection.rangeCount > 0) {\r\n-                // 记录光标最后点击可编辑div中所选择的位置\r\n-                this.lastEditRange = selection.getRangeAt(0);\r\n-                console.log(selection.getRangeAt(0));\r\n-            }\r\n-        }\r\n-    },\r\n-    methods: {\r\n-        publish() {\r\n-            this.$refs['editableInputAreaDiv'].focus()\r\n-            let selection = window.getSelection()\r\n-\r\n-        },\r\n-        addEmoji(emoji) {\r\n-            let edit = this.$refs['editableInputAreaDiv']\r\n-\r\n-            edit.focus()\r\n-            let selection = window.getSelection()\r\n-            // 如果存在最后的光标对象\r\n-            if (this.lastEditRange) {\r\n-                console.log('last');\r\n-                // 选区对象清除所有光标\r\n-                selection.removeAllRanges();\r\n-                // 并添加最后记录的光标，以还原之前的状态\r\n-                selection.addRange(this.lastEditRange);\r\n-\r\n-                // 创建表情图\r\n-                let img = document.createElement('img');\r\n-                img.src = 'https://cdn.sunofbeaches.com/emoji/' + emoji + '.png';\r\n-                console.log(img);\r\n-                /*\r\n-                // 也可以这样创建img \r\n-                let image = new Image();\r\n-                image.src = 'https://cdn.sunofbeaches.com/emoji/' + emoji + '.png'; */\r\n-\r\n-                // 获取到最后选择的位置\r\n-                var range = selection.getRangeAt(0);\r\n-\r\n-                // 在此位置插入表情图\r\n-                range.insertNode(img)\r\n-                // range.insertNode(image) // 或者这样插入\r\n-\r\n-                // false，表示将Range对象所代表的区域的起点移动到终点处\r\n-                range.collapse(false)\r\n-\r\n-                // 记录最后的位置\r\n-                this.lastEditRange = selection.getRangeAt(0);\r\n-            } else {\r\n-                console.log('new')\r\n-                // 创建一个img标签（表情）\r\n-                let img = document.createElement('img');\r\n-                img.src = 'https://cdn.sunofbeaches.com/emoji/' + emoji + '.png';\r\n-                console.log(img);\r\n-                // 将表情添加到可编辑的div中，作为可编辑div的子节点\r\n-                edit.appendChild(img)\r\n-                // 使用选取对象，选取可编辑div中的所有子节点\r\n-                selection.selectAllChildren(edit)\r\n-                // 合并到最后面，即实现了添加一个表情后，把光标移到最后面\r\n-                selection.collapseToEnd()\r\n-                return\r\n-            }\r\n-\r\n-\r\n-        }\r\n-    }\r\n-}\r\n-</script>\r\n-\r\n-<style scoped lang=\"less\">\r\n-.emoji-container {\r\n-    width: 100%;\r\n-    height: 100%;\r\n-    margin: 10px auto;\r\n-    border-radius: 5px;\r\n-    padding: 10px;\r\n-\r\n-    background-color: #fff;\r\n-\r\n-    ::v-deep .input-area {\r\n-        height: 100px;\r\n-        border: 1px solid #e9e9e9;\r\n-        outline: none;\r\n-        padding: 10px;\r\n-        font-size: 16px;\r\n-        overflow-y: scroll;\r\n-\r\n-        &:focus {\r\n-            border: 1px solid red;\r\n-        }\r\n-\r\n-        img {\r\n-            width: 20px;\r\n-            height: 20px;\r\n-            vertical-align: bottom;\r\n-            margin: 0 2px;\r\n-\r\n-        }\r\n-    }\r\n-\r\n-    .input-area-bar {\r\n-        display: flex;\r\n-        justify-content: space-between;\r\n-        align-items: center;\r\n-        margin: 10px 5px;\r\n-        line-height: 20px;\r\n-        height: 30px;\r\n-\r\n-        .emoji-txt {\r\n-            color: #4485f9;\r\n-            cursor: pointer;\r\n-        }\r\n-\r\n-\r\n-        .emoji-btn {\r\n-            background-color: #4485f9;\r\n-            cursor: pointer;\r\n-            padding: 0px 10px;\r\n-            color: #fff;\r\n-            height: 100%;\r\n-            line-height: 28px;\r\n-            border-radius: 5px;\r\n-        }\r\n-    }\r\n-}\r\n-\r\n-.emoji-item-container {\r\n-    background-color: #fff;\r\n-    height: 200px;\r\n-    border-radius: 5px;\r\n-    padding: 5px;\r\n-    overflow-y: auto;\r\n-    margin-top: 14px;\r\n-    box-shadow: 0 0 5px 5px rgba(0, 0, 0, .028);\r\n-\r\n-    .emoji-item-area {\r\n-\r\n-        img {\r\n-            cursor: pointer;\r\n-            width: 20px;\r\n-            height: 20px;\r\n-            margin: 2px;\r\n-            padding: 9px;\r\n-            border-radius: 8px;\r\n-            vertical-align: bottom;\r\n-            transition: all .28s;\r\n-\r\n-            &:hover {\r\n-                transform: scale(1.2);\r\n-            }\r\n-\r\n-            &:hover {\r\n-                background-color: #eaeaea;\r\n-            }\r\n-        }\r\n-    }\r\n-\r\n-}\r\n-\r\n-.clearfix::before,\r\n-.clearfix::after {\r\n-    content: \"\";\r\n-    display: table;\r\n-    clear: both;\r\n-}\r\n-\r\n-::-webkit-scrollbar {\r\n-    width: 4px;\r\n-}\r\n-\r\n-::-webkit-scrollbar-thumb {\r\n-    border-radius: 10px;\r\n-    box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.12);\r\n-    background: rgba(0, 0, 0, 0.2);\r\n-}\r\n-\r\n-/*::-webkit-scrollbar-track {\r\n-        box-shadow: inset 0 0 5px rgba(0,0,0,0.2);\r\n-        border-radius: 10px;\r\n-        background: rgba(0,0,0,0.1);\r\n-    }*/\r\n-</style>\r\n-\r\n-<template>\r\n-    <div class=\"emoji-container clearfix\">\r\n-\r\n-        <div class=\"input-area\" ref=\"editableInputAreaDiv\" contenteditable=\"true\">\r\n-            halo world\r\n-            <img src=\"https://cdn.sunofbeaches.com/emoji/1.png\" alt=\"\">\r\n-        </div>\r\n-        \r\n-        <div class=\"input-area-bar\">\r\n-            <span class=\"emoji-txt\" @click=\"emojiShow = !emojiShow\">表情</span>\r\n-            <span class=\"emoji-btn\" @click=\"publish\">发布</span>\r\n-        </div>\r\n-        \r\n-        <div class=\"emoji-item-container\" v-show=\"true\">\r\n-            <div class=\"emoji-item-area\">\r\n-                <img v-for=\"(emoji, key) in 130\" :key=\"key\" @click=\"addEmoji(emoji)\"\r\n-                    :src=\"'https://cdn.sunofbeaches.com/emoji/' + emoji + '.png'\" alt=\"\" />\r\n-            </div>\r\n-        </div>\r\n-    </div>\r\n-</template>\r\n-\r\n-<script>\r\n-export default {\r\n-    name: \"Emoji\",\r\n-    data() {\r\n-        return {\r\n-            emojiShow: false,\r\n-            lastEditRange: null,\r\n-        }\r\n-    },\r\n-    mounted() {\r\n-        this.$refs['editableInputAreaDiv'].onclick = () => {\r\n-            // 获取选定对象\r\n-            let selection = window.getSelection()\r\n-            console.log(selection, selection.rangeCount, 'selection');\r\n-            // 设置最后光标对象\r\n-            if (selection.rangeCount > 0) {\r\n-                // 记录光标最后点击可编辑div中所选择的位置\r\n-                this.lastEditRange = selection.getRangeAt(0);\r\n-                console.log(selection.getRangeAt(0));\r\n-            }\r\n-        }\r\n-    },\r\n-    methods: {\r\n-        publish() {\r\n-            this.$refs['editableInputAreaDiv'].focus()\r\n-            let selection = window.getSelection()\r\n-\r\n-        },\r\n-        addEmoji(emoji) {\r\n-            let edit = this.$refs['editableInputAreaDiv']\r\n-\r\n-            edit.focus()\r\n-            let selection = window.getSelection()\r\n-            // 如果存在最后的光标对象\r\n-            if (this.lastEditRange) {\r\n-                console.log('last');\r\n-                // 选区对象清除所有光标\r\n-                selection.removeAllRanges();\r\n-                // 并添加最后记录的光标，以还原之前的状态\r\n-                selection.addRange(this.lastEditRange);\r\n-\r\n-                // 创建表情图\r\n-                let img = document.createElement('img');\r\n-                img.src = 'https://cdn.sunofbeaches.com/emoji/' + emoji + '.png';\r\n-                console.log(img);\r\n-                /*\r\n-                // 也可以这样创建img \r\n-                let image = new Image();\r\n-                image.src = 'https://cdn.sunofbeaches.com/emoji/' + emoji + '.png'; */\r\n-\r\n-                // 获取到最后选择的位置\r\n-                var range = selection.getRangeAt(0);\r\n-\r\n-                // 在此位置插入表情图\r\n-                range.insertNode(img)\r\n-                // range.insertNode(image) // 或者这样插入\r\n-\r\n-                // false，表示将Range对象所代表的区域的起点移动到终点处\r\n-                range.collapse(false)\r\n-\r\n-                // 记录最后的位置\r\n-                this.lastEditRange = selection.getRangeAt(0);\r\n-            } else {\r\n-                console.log('new')\r\n-                // 创建一个img标签（表情）\r\n-                let img = document.createElement('img');\r\n-                img.src = 'https://cdn.sunofbeaches.com/emoji/' + emoji + '.png';\r\n-                console.log(img);\r\n-                // 将表情添加到可编辑的div中，作为可编辑div的子节点\r\n-                edit.appendChild(img)\r\n-                // 使用选取对象，选取可编辑div中的所有子节点\r\n-                selection.selectAllChildren(edit)\r\n-                // 合并到最后面，即实现了添加一个表情后，把光标移到最后面\r\n-                selection.collapseToEnd()\r\n-                return\r\n-            }\r\n-\r\n-\r\n-        }\r\n-    }\r\n-}\r\n-</script>\r\n-\r\n-<style scoped lang=\"less\">\r\n-.emoji-container {\r\n-    width: 100%;\r\n-    height: 160px;\r\n-    margin: 10px auto;\r\n-    border-radius: 5px;\r\n-    padding: 10px;\r\n-\r\n-    background-color: #fff;\r\n-\r\n-    ::v-deep .input-area {\r\n-        height: 100px;\r\n-        border: 1px solid #e9e9e9;\r\n-        outline: none;\r\n-        padding: 10px;\r\n-        font-size: 16px;\r\n-        overflow-y: scroll;\r\n-\r\n-        &:focus {\r\n-            border: 1px solid red;\r\n-        }\r\n-\r\n-        img {\r\n-            width: 20px;\r\n-            height: 20px;\r\n-            vertical-align: bottom;\r\n-            margin: 0 2px;\r\n-\r\n-        }\r\n-    }\r\n-\r\n-    .input-area-bar {\r\n-        display: flex;\r\n-        justify-content: space-between;\r\n-        align-items: center;\r\n-        margin: 10px 5px;\r\n-        line-height: 20px;\r\n-        height: 30px;\r\n-\r\n-        .emoji-txt {\r\n-            color: #4485f9;\r\n-            cursor: pointer;\r\n-        }\r\n-\r\n-\r\n-        .emoji-btn {\r\n-            background-color: #4485f9;\r\n-            cursor: pointer;\r\n-            padding: 0px 10px;\r\n-            color: #fff;\r\n-            height: 100%;\r\n-            line-height: 28px;\r\n-            border-radius: 5px;\r\n-        }\r\n-    }\r\n-}\r\n-\r\n-.emoji-item-container {\r\n-    background-color: #fff;\r\n-    height: 200px;\r\n-    border-radius: 5px;\r\n-    padding: 5px;\r\n-    overflow-y: auto;\r\n-    margin-top: 14px;\r\n-    box-shadow: 0 0 5px 5px rgba(0, 0, 0, .028);\r\n-\r\n-    .emoji-item-area {\r\n-\r\n-        img {\r\n-            cursor: pointer;\r\n-            width: 20px;\r\n-            height: 20px;\r\n-            margin: 2px;\r\n-            padding: 9px;\r\n-            border-radius: 8px;\r\n-            vertical-align: bottom;\r\n-            transition: all .28s;\r\n-\r\n-            &:hover {\r\n-                transform: scale(1.2);\r\n-            }\r\n-\r\n-            &:hover {\r\n-                background-color: #eaeaea;\r\n-            }\r\n-        }\r\n-    }\r\n-\r\n-}\r\n-\r\n-.clearfix::before,\r\n-.clearfix::after {\r\n-    content: \"\";\r\n-    display: table;\r\n-    clear: both;\r\n-}\r\n-\r\n-::-webkit-scrollbar {\r\n-    width: 4px;\r\n-}\r\n-\r\n-::-webkit-scrollbar-thumb {\r\n-    border-radius: 10px;\r\n-    box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.12);\r\n-    background: rgba(0, 0, 0, 0.2);\r\n-}\r\n-\r\n-/*::-webkit-scrollbar-track {\r\n-        box-shadow: inset 0 0 5px rgba(0,0,0,0.2);\r\n-        border-radius: 10px;\r\n-        background: rgba(0,0,0,0.1);\r\n-    }*/\r\n-</style>\r\n-\r\n-<template>\r\n-    <div class=\"emoji-container clearfix\">\r\n-\r\n-        <div class=\"input-area\" ref=\"editableInputAreaDiv\" contenteditable=\"true\">\r\n-            halo world\r\n-            <img src=\"https://cdn.sunofbeaches.com/emoji/1.png\" alt=\"\">\r\n-        </div>\r\n-        \r\n-        <div class=\"input-area-bar\">\r\n-            <span class=\"emoji-txt\" @click=\"emojiShow = !emojiShow\">表情</span>\r\n-            <span class=\"emoji-btn\" @click=\"publish\">发布</span>\r\n-        </div>\r\n-        \r\n-        <div class=\"emoji-item-container\" v-show=\"true\">\r\n-            <div class=\"emoji-item-area\">\r\n-                <img v-for=\"(emoji, key) in 130\" :key=\"key\" @click=\"addEmoji(emoji)\"\r\n-                    :src=\"'https://cdn.sunofbeaches.com/emoji/' + emoji + '.png'\" alt=\"\" />\r\n-            </div>\r\n-        </div>\r\n-    </div>\r\n-</template>\r\n-\r\n-<script>\r\n-export default {\r\n-    name: \"Emoji\",\r\n-    data() {\r\n-        return {\r\n-            emojiShow: false,\r\n-            lastEditRange: null,\r\n-        }\r\n-    },\r\n-    mounted() {\r\n-        this.$refs['editableInputAreaDiv'].onclick = () => {\r\n-            // 获取选定对象\r\n-            let selection = window.getSelection()\r\n-            console.log(selection, selection.rangeCount, 'selection');\r\n-            // 设置最后光标对象\r\n-            if (selection.rangeCount > 0) {\r\n-                // 记录光标最后点击可编辑div中所选择的位置\r\n-                this.lastEditRange = selection.getRangeAt(0);\r\n-                console.log(selection.getRangeAt(0));\r\n-            }\r\n-        }\r\n-    },\r\n-    methods: {\r\n-        publish() {\r\n-            this.$refs['editableInputAreaDiv'].focus()\r\n-            let selection = window.getSelection()\r\n-\r\n-        },\r\n-        addEmoji(emoji) {\r\n-            let edit = this.$refs['editableInputAreaDiv']\r\n-\r\n-            edit.focus()\r\n-            let selection = window.getSelection()\r\n-            // 如果存在最后的光标对象\r\n-            if (this.lastEditRange) {\r\n-                console.log('last');\r\n-                // 选区对象清除所有光标\r\n-                selection.removeAllRanges();\r\n-                // 并添加最后记录的光标，以还原之前的状态\r\n-                selection.addRange(this.lastEditRange);\r\n-\r\n-                // 创建表情图\r\n-                let img = document.createElement('img');\r\n-                img.src = 'https://cdn.sunofbeaches.com/emoji/' + emoji + '.png';\r\n-                console.log(img);\r\n-                /*\r\n-                // 也可以这样创建img \r\n-                let image = new Image();\r\n-                image.src = 'https://cdn.sunofbeaches.com/emoji/' + emoji + '.png'; */\r\n-\r\n-                // 获取到最后选择的位置\r\n-                var range = selection.getRangeAt(0);\r\n-\r\n-                // 在此位置插入表情图\r\n-                range.insertNode(img)\r\n-                // range.insertNode(image) // 或者这样插入\r\n-\r\n-                // false，表示将Range对象所代表的区域的起点移动到终点处\r\n-                range.collapse(false)\r\n-\r\n-                // 记录最后的位置\r\n-                this.lastEditRange = selection.getRangeAt(0);\r\n-            } else {\r\n-                console.log('new')\r\n-                // 创建一个img标签（表情）\r\n-                let img = document.createElement('img');\r\n-                img.src = 'https://cdn.sunofbeaches.com/emoji/' + emoji + '.png';\r\n-                console.log(img);\r\n-                // 将表情添加到可编辑的div中，作为可编辑div的子节点\r\n-                edit.appendChild(img)\r\n-                // 使用选取对象，选取可编辑div中的所有子节点\r\n-                selection.selectAllChildren(edit)\r\n-                // 合并到最后面，即实现了添加一个表情后，把光标移到最后面\r\n-                selection.collapseToEnd()\r\n-                return\r\n-            }\r\n-\r\n-\r\n-        }\r\n-    }\r\n-}\r\n-</script>\r\n-\r\n-<style scoped lang=\"less\">\r\n-.emoji-container {\r\n-    width: 100%;\r\n-    height: 160px;\r\n-    margin: 10px auto;\r\n-    border-radius: 5px;\r\n-    padding: 10px;\r\n-\r\n-    background-color: #fff;\r\n-\r\n-    ::v-deep .input-area {\r\n-        height: 100px;\r\n-        border: 1px solid #e9e9e9;\r\n-        outline: none;\r\n-        padding: 10px;\r\n-        font-size: 16px;\r\n-        overflow-y: scroll;\r\n-\r\n-        &:focus {\r\n-            border: 1px solid red;\r\n-        }\r\n-\r\n-        img {\r\n-            width: 20px;\r\n-            height: 20px;\r\n-            vertical-align: bottom;\r\n-            margin: 0 2px;\r\n-\r\n-        }\r\n-    }\r\n-\r\n-    .input-area-bar {\r\n-        display: flex;\r\n-        justify-content: space-between;\r\n-        align-items: center;\r\n-        margin: 10px 5px;\r\n-        line-height: 20px;\r\n-        height: 30px;\r\n-\r\n-        .emoji-txt {\r\n-            color: #4485f9;\r\n-            cursor: pointer;\r\n-        }\r\n-\r\n-\r\n-        .emoji-btn {\r\n-            background-color: #4485f9;\r\n-            cursor: pointer;\r\n-            padding: 0px 10px;\r\n-            color: #fff;\r\n-            height: 100%;\r\n-            line-height: 28px;\r\n-            border-radius: 5px;\r\n-        }\r\n-    }\r\n-}\r\n-\r\n-.emoji-item-container {\r\n-    background-color: #fff;\r\n-    height: 200px;\r\n-    border-radius: 5px;\r\n-    padding: 5px;\r\n-    overflow-y: auto;\r\n-    margin-top: 14px;\r\n-    box-shadow: 0 0 5px 5px rgba(0, 0, 0, .028);\r\n-\r\n-    .emoji-item-area {\r\n-\r\n-        img {\r\n-            cursor: pointer;\r\n-            width: 20px;\r\n-            height: 20px;\r\n-            margin: 2px;\r\n-            padding: 9px;\r\n-            border-radius: 8px;\r\n-            vertical-align: bottom;\r\n-            transition: all .28s;\r\n-\r\n-            &:hover {\r\n-                transform: scale(1.2);\r\n-            }\r\n-\r\n-            &:hover {\r\n-                background-color: #eaeaea;\r\n-            }\r\n-        }\r\n-    }\r\n-\r\n-}\r\n-\r\n-.clearfix::before,\r\n-.clearfix::after {\r\n-    content: \"\";\r\n-    display: table;\r\n-    clear: both;\r\n-}\r\n-\r\n-::-webkit-scrollbar {\r\n-    width: 4px;\r\n-}\r\n-\r\n-::-webkit-scrollbar-thumb {\r\n-    border-radius: 10px;\r\n-    box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.12);\r\n-    background: rgba(0, 0, 0, 0.2);\r\n-}\r\n-\r\n-/*::-webkit-scrollbar-track {\r\n-        box-shadow: inset 0 0 5px rgba(0,0,0,0.2);\r\n-        border-radius: 10px;\r\n-        background: rgba(0,0,0,0.1);\r\n-    }*/\r\n-</style>\r\n-\r\n"
                },
                {
                    "date": 1711870138911,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -67,9 +67,8 @@\n     }\r\n   }\r\n   </script>\r\n \r\n-\r\n <style scoped lang=\"less\">\r\n .emoji-container {\r\n     width: 100%;\r\n     height: 100%;\r\n"
                },
                {
                    "date": 1711870473936,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,218 @@\n+<template>\r\n+    <div class=\"emoji-container clearfix\">\r\n+\r\n+        <div class=\"input-area\" ref=\"editableInputAreaDiv\" contenteditable=\"true\">\r\n+            halo world\r\n+            <img src=\"https://cdn.sunofbeaches.com/emoji/1.png\" alt=\"\">\r\n+        </div>\r\n+        \r\n+        <div class=\"input-area-bar\">\r\n+            <span class=\"emoji-txt\" @click=\"emojiShow = !emojiShow\">表情</span>\r\n+            <span class=\"emoji-btn\" @click=\"publish\">发布</span>\r\n+        </div>\r\n+        \r\n+        <div class=\"emoji-item-container\" v-show=\"true\">\r\n+            <div class=\"emoji-item-area\">\r\n+                <img v-for=\"(emoji, key) in 130\" :key=\"key\" @click=\"addEmoji(emoji)\"\r\n+                    :src=\"'https://cdn.sunofbeaches.com/emoji/' + emoji + '.png'\" alt=\"\" />\r\n+            </div>\r\n+        </div>\r\n+    </div>\r\n+</template>\r\n+\r\n+<script>\r\n+export default {\r\n+    name: \"Emoji\",\r\n+    data() {\r\n+        return {\r\n+            emojiShow: false,\r\n+            lastEditRange: null,\r\n+        }\r\n+    },\r\n+    mounted() {\r\n+        this.$refs['editableInputAreaDiv'].onclick = () => {\r\n+            // 获取选定对象\r\n+            let selection = window.getSelection()\r\n+            console.log(selection, selection.rangeCount, 'selection');\r\n+            // 设置最后光标对象\r\n+            if (selection.rangeCount > 0) {\r\n+                // 记录光标最后点击可编辑div中所选择的位置\r\n+                this.lastEditRange = selection.getRangeAt(0);\r\n+                console.log(selection.getRangeAt(0));\r\n+            }\r\n+        }\r\n+    },\r\n+    methods: {\r\n+        publish() {\r\n+            this.$refs['editableInputAreaDiv'].focus()\r\n+            let selection = window.getSelection()\r\n+\r\n+        },\r\n+        addEmoji(emoji) {\r\n+            let edit = this.$refs['editableInputAreaDiv']\r\n+\r\n+            edit.focus()\r\n+            let selection = window.getSelection()\r\n+            // 如果存在最后的光标对象\r\n+            if (this.lastEditRange) {\r\n+                console.log('last');\r\n+                // 选区对象清除所有光标\r\n+                selection.removeAllRanges();\r\n+                // 并添加最后记录的光标，以还原之前的状态\r\n+                selection.addRange(this.lastEditRange);\r\n+\r\n+                // 创建表情图\r\n+                let img = document.createElement('img');\r\n+                img.src = 'https://cdn.sunofbeaches.com/emoji/' + emoji + '.png';\r\n+                console.log(img);\r\n+                /*\r\n+                // 也可以这样创建img \r\n+                let image = new Image();\r\n+                image.src = 'https://cdn.sunofbeaches.com/emoji/' + emoji + '.png'; */\r\n+\r\n+                // 获取到最后选择的位置\r\n+                var range = selection.getRangeAt(0);\r\n+\r\n+                // 在此位置插入表情图\r\n+                range.insertNode(img)\r\n+                // range.insertNode(image) // 或者这样插入\r\n+\r\n+                // false，表示将Range对象所代表的区域的起点移动到终点处\r\n+                range.collapse(false)\r\n+\r\n+                // 记录最后的位置\r\n+                this.lastEditRange = selection.getRangeAt(0);\r\n+            } else {\r\n+                console.log('new')\r\n+                // 创建一个img标签（表情）\r\n+                let img = document.createElement('img');\r\n+                img.src = 'https://cdn.sunofbeaches.com/emoji/' + emoji + '.png';\r\n+                console.log(img);\r\n+                // 将表情添加到可编辑的div中，作为可编辑div的子节点\r\n+                edit.appendChild(img)\r\n+                // 使用选取对象，选取可编辑div中的所有子节点\r\n+                selection.selectAllChildren(edit)\r\n+                // 合并到最后面，即实现了添加一个表情后，把光标移到最后面\r\n+                selection.collapseToEnd()\r\n+                return\r\n+            }\r\n+\r\n+\r\n+        }\r\n+    }\r\n+}\r\n+</script>\r\n+\r\n+<style scoped lang=\"less\">\r\n+.emoji-container {\r\n+    width: 100%;\r\n+    height: 100%;\r\n+    margin: 10px auto;\r\n+    border-radius: 5px;\r\n+    padding: 10px;\r\n+    background-color: #fff;\r\n+\r\n+    ::v-deep .input-area {\r\n+        height: 2rem;\r\n+        border: 1px solid #e9e9e9;\r\n+        outline: none;\r\n+        padding: 10px;\r\n+        font-size: 0.24rem;\r\n+        overflow-y: scroll;\r\n+\r\n+        &:focus {\r\n+            border: 1px solid red;\r\n+        }\r\n+\r\n+        img {\r\n+            width: 20px;\r\n+            height: 20px;\r\n+            vertical-align: bottom;\r\n+            margin: 0 2px;\r\n+\r\n+        }\r\n+    }\r\n+\r\n+    .input-area-bar {\r\n+        display: flex;\r\n+        justify-content: space-between;\r\n+        align-items: center;\r\n+        margin: 10px 5px;\r\n+        line-height: 20px;\r\n+        height: 30px;\r\n+\r\n+        .emoji-txt {\r\n+            color: #4485f9;\r\n+            cursor: pointer;\r\n+        }\r\n+\r\n+\r\n+        .emoji-btn {\r\n+            background-color: #4485f9;\r\n+            cursor: pointer;\r\n+            padding: 0px 10px;\r\n+            color: #fff;\r\n+            height: 100%;\r\n+            line-height: 28px;\r\n+            border-radius: 5px;\r\n+        }\r\n+    }\r\n+}\r\n+\r\n+.emoji-item-container {\r\n+    background-color: #fff;\r\n+    height: 200px;\r\n+    border-radius: 5px;\r\n+    padding: 5px;\r\n+    overflow-y: auto;\r\n+    margin-top: 14px;\r\n+    box-shadow: 0 0 5px 5px rgba(0, 0, 0, .028);\r\n+\r\n+    .emoji-item-area {\r\n+\r\n+        img {\r\n+            cursor: pointer;\r\n+            width: 20px;\r\n+            height: 20px;\r\n+            margin: 2px;\r\n+            padding: 9px;\r\n+            border-radius: 8px;\r\n+            vertical-align: bottom;\r\n+            transition: all .28s;\r\n+\r\n+            &:hover {\r\n+                transform: scale(1.2);\r\n+            }\r\n+\r\n+            &:hover {\r\n+                background-color: #eaeaea;\r\n+            }\r\n+        }\r\n+    }\r\n+\r\n+}\r\n+\r\n+.clearfix::before,\r\n+.clearfix::after {\r\n+    content: \"\";\r\n+    display: table;\r\n+    clear: both;\r\n+}\r\n+\r\n+&::-webkit-scrollbar {\r\n+    width: 4px;\r\n+}\r\n+\r\n+&::-webkit-scrollbar-thumb {\r\n+    border-radius: 10px;\r\n+    box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.12);\r\n+    background: rgba(0, 0, 0, 0.2);\r\n+}\r\n+\r\n+/*::-webkit-scrollbar-track {\r\n+        box-shadow: inset 0 0 5px rgba(0,0,0,0.2);\r\n+        border-radius: 10px;\r\n+        background: rgba(0,0,0,0.1);\r\n+    }*/\r\n+</style>\r\n+\r\n"
                }
            ],
            "date": 1711869295351,
            "name": "Commit-0",
            "content": "<template>\r\n    <div class=\"emoji-container clearfix\">\r\n\r\n        <div class=\"input-area\" ref=\"editableInputAreaDiv\" contenteditable=\"true\">\r\n            halo world\r\n            <img src=\"https://cdn.sunofbeaches.com/emoji/1.png\" alt=\"\">\r\n        </div>\r\n        \r\n        <div class=\"input-area-bar\">\r\n            <span class=\"emoji-txt\" @click=\"emojiShow = !emojiShow\">表情</span>\r\n            <span class=\"emoji-btn\" @click=\"publish\">发布</span>\r\n        </div>\r\n        \r\n        <div class=\"emoji-item-container\" v-show=\"true\">\r\n            <div class=\"emoji-item-area\">\r\n                <img v-for=\"(emoji, key) in 130\" :key=\"key\" @click=\"addEmoji(emoji)\"\r\n                    :src=\"'https://cdn.sunofbeaches.com/emoji/' + emoji + '.png'\" alt=\"\" />\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: \"Emoji\",\r\n    data() {\r\n        return {\r\n            emojiShow: false,\r\n            lastEditRange: null,\r\n        }\r\n    },\r\n    mounted() {\r\n        this.$refs['editableInputAreaDiv'].onclick = () => {\r\n            // 获取选定对象\r\n            let selection = window.getSelection()\r\n            console.log(selection, selection.rangeCount, 'selection');\r\n            // 设置最后光标对象\r\n            if (selection.rangeCount > 0) {\r\n                // 记录光标最后点击可编辑div中所选择的位置\r\n                this.lastEditRange = selection.getRangeAt(0);\r\n                console.log(selection.getRangeAt(0));\r\n            }\r\n        }\r\n    },\r\n    methods: {\r\n        publish() {\r\n            this.$refs['editableInputAreaDiv'].focus()\r\n            let selection = window.getSelection()\r\n\r\n        },\r\n        addEmoji(emoji) {\r\n            let edit = this.$refs['editableInputAreaDiv']\r\n\r\n            edit.focus()\r\n            let selection = window.getSelection()\r\n            // 如果存在最后的光标对象\r\n            if (this.lastEditRange) {\r\n                console.log('last');\r\n                // 选区对象清除所有光标\r\n                selection.removeAllRanges();\r\n                // 并添加最后记录的光标，以还原之前的状态\r\n                selection.addRange(this.lastEditRange);\r\n\r\n                // 创建表情图\r\n                let img = document.createElement('img');\r\n                img.src = 'https://cdn.sunofbeaches.com/emoji/' + emoji + '.png';\r\n                console.log(img);\r\n                /*\r\n                // 也可以这样创建img \r\n                let image = new Image();\r\n                image.src = 'https://cdn.sunofbeaches.com/emoji/' + emoji + '.png'; */\r\n\r\n                // 获取到最后选择的位置\r\n                var range = selection.getRangeAt(0);\r\n\r\n                // 在此位置插入表情图\r\n                range.insertNode(img)\r\n                // range.insertNode(image) // 或者这样插入\r\n\r\n                // false，表示将Range对象所代表的区域的起点移动到终点处\r\n                range.collapse(false)\r\n\r\n                // 记录最后的位置\r\n                this.lastEditRange = selection.getRangeAt(0);\r\n            } else {\r\n                console.log('new')\r\n                // 创建一个img标签（表情）\r\n                let img = document.createElement('img');\r\n                img.src = 'https://cdn.sunofbeaches.com/emoji/' + emoji + '.png';\r\n                console.log(img);\r\n                // 将表情添加到可编辑的div中，作为可编辑div的子节点\r\n                edit.appendChild(img)\r\n                // 使用选取对象，选取可编辑div中的所有子节点\r\n                selection.selectAllChildren(edit)\r\n                // 合并到最后面，即实现了添加一个表情后，把光标移到最后面\r\n                selection.collapseToEnd()\r\n                return\r\n            }\r\n\r\n\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.emoji-container {\r\n    width: 400px;\r\n    height: 160px;\r\n    margin: 10px auto;\r\n    border-radius: 5px;\r\n    padding: 10px;\r\n\r\n    background-color: #fff;\r\n\r\n    ::v-deep .input-area {\r\n        height: 100px;\r\n        border: 1px solid #e9e9e9;\r\n        outline: none;\r\n        padding: 10px;\r\n        font-size: 16px;\r\n        overflow-y: scroll;\r\n\r\n        &:focus {\r\n            border: 1px solid red;\r\n        }\r\n\r\n        img {\r\n            width: 20px;\r\n            height: 20px;\r\n            vertical-align: bottom;\r\n            margin: 0 2px;\r\n\r\n        }\r\n    }\r\n\r\n    .input-area-bar {\r\n        display: flex;\r\n        justify-content: space-between;\r\n        align-items: center;\r\n        margin: 10px 5px;\r\n        line-height: 20px;\r\n        height: 30px;\r\n\r\n        .emoji-txt {\r\n            color: #4485f9;\r\n            cursor: pointer;\r\n        }\r\n\r\n\r\n        .emoji-btn {\r\n            background-color: #4485f9;\r\n            cursor: pointer;\r\n            padding: 0px 10px;\r\n            color: #fff;\r\n            height: 100%;\r\n            line-height: 28px;\r\n            border-radius: 5px;\r\n        }\r\n    }\r\n}\r\n\r\n.emoji-item-container {\r\n    background-color: #fff;\r\n    height: 200px;\r\n    border-radius: 5px;\r\n    padding: 5px;\r\n    overflow-y: auto;\r\n    margin-top: 14px;\r\n    box-shadow: 0 0 5px 5px rgba(0, 0, 0, .028);\r\n\r\n    .emoji-item-area {\r\n\r\n        img {\r\n            cursor: pointer;\r\n            width: 20px;\r\n            height: 20px;\r\n            margin: 2px;\r\n            padding: 9px;\r\n            border-radius: 8px;\r\n            vertical-align: bottom;\r\n            transition: all .28s;\r\n\r\n            &:hover {\r\n                transform: scale(1.2);\r\n            }\r\n\r\n            &:hover {\r\n                background-color: #eaeaea;\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n\r\n.clearfix::before,\r\n.clearfix::after {\r\n    content: \"\";\r\n    display: table;\r\n    clear: both;\r\n}\r\n\r\n::-webkit-scrollbar {\r\n    width: 4px;\r\n}\r\n\r\n::-webkit-scrollbar-thumb {\r\n    border-radius: 10px;\r\n    box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.12);\r\n    background: rgba(0, 0, 0, 0.2);\r\n}\r\n\r\n/*::-webkit-scrollbar-track {\r\n        box-shadow: inset 0 0 5px rgba(0,0,0,0.2);\r\n        border-radius: 10px;\r\n        background: rgba(0,0,0,0.1);\r\n    }*/\r\n</style>\r\n\r\n"
        }
    ]
}